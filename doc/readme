
### FOCUS: FermiOniC qUantum Simulation ###

   Started by Zhendong Li @ Sep 14, 2019

=== Goals === 
 - Explore the complexity of electronic structure problems (FeMoco, Mn12, U2, etc.)
 - Predict magnetic parameters (g-/A-tensors) of transition metal compounds 

=== Features ===
 - FCI and SCI for benchmarking & preparing initial guesses for TNS
 - DMRG and CTNS (NR and R with time-reversal symmetry adaptation)
 - VMC with NN (exploring new ansatze)

=== How to install ===
 - Requirements:
      1. C++ compiler [gcc>=9.3 is preferred]
      2. boost (https://www.boost.org/users/download/)
      3. openmpi: need to comipled with 64-bit integer support
            ./configure --prefix=/public/home/bnulizdtest/openmpi/install64 --with-slurm --with-pmi --with-pmix FFLAGS="-m64 -fdefault-integer-8" FCFLAGS="-m64 -fdefault-integer-8" CFLAGS=-m64 CXXFLAGS=-m64 --enable-mpi-fortran=usempi
            make -j N && make install
      4. extlibs/gsl: for SA-DMRG
      5. extlibs/nlopt: for OO-DMRG
      6. extlibs/zquatev: (https://github.com/qsimulate-open/zquatev) for 
            diagonalization of quaternion matrix (relativistic case)
      x. extlibs/lapack: for linear algebra [NOT REQUIRED IF MKL EXIST]
      x. compression libraries: lz4 & zstd [NOT USED NOW]
 - For GPU:
      1. extlibs/magma
         $ cp make.inc-examples/make.inc.mkl-icc make.inc
         $ 修改make.inc的22行 GPU架构为GPU_TARGET ?= Volta或者Ampere （NVIDIA GeForce RTX 3090）
         $ make
         $ make install prefix= INSTALL_PATH
      2. extlibs/nccl      
 - Install:
      1. Setup all the einvironments [if GPU is used, be careful about Cuda toolkit & runtime version]
      2. Follow the guide described in zhendongli2008@github.io
 - Tested compilations:
      1. GCC 9.2.0_2 + boost 1_56_0 (macbook pro; need to > 8 for ranged for)
      2. intel 19.1.3.304 + boost 1_75_0 (lenovo@BNU)
      3. intel 20.0.4 + boost 1_77_0 (BSCC-A6; slurm support)

=== How to run ===
 - General procedure:	
      -. run sci.x to generate initial guess
      -. run ctns.x to optimize CTNS, see examples
      -. run sadmrg.x to optimize MPS with SU(2) symmetry
      -. run rdm.x to savebin / compute RDMs (slow)
 - Examples:
      0. go to examples/fe2s2
      1. ../../bin/sci.x input.dat
      2. mpirun -np 10 ../../bin/ctns.x input.dat

=== Known problems ===
 - mpi::reduce hangs on intel MPI 
    https://github.com/boostorg/mpi/issues/124
    edit BOOST_MPI_USE_IMPROBE in boost/mpi/config.hpp
 - std::filesystem may cause problems for old compilers
 - magma needs to be compiled with the same compiler as FOCUS
   otherwise, there will be problems in using openmp!

